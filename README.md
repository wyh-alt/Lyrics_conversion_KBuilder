# 小灰熊歌词格式转换器

一个简洁直观的歌词格式转换工具，支持标准时间轴歌词与小灰熊歌词软件格式之间的**双向转换**。

## 功能特点

✨ **简洁易用的图形界面**
- 基于 PyQt6 开发的现代化界面
- 支持拖拽文件或文件夹上传
- 批量转换多个歌词文件

🔄 **双向转换模式**
- **正向转换**：标准时间轴格式 → 小灰熊格式
- **反向转换**：小灰熊格式 → 标准时间轴格式

📁 **灵活的文件选择**
- 支持拖拽单个或多个文件
- 支持拖拽文件夹（自动搜索所有歌词文件）
- 支持手动选择文件或文件夹
- 支持 .txt 和 .lrc 格式

🚀 **高效转换**
- 实时进度显示
- 批量处理
- 自动计算歌词持续时间
- 错误处理和报告

## 安装说明

### 方式1：使用EXE可执行文件（推荐，无需安装Python）

1. **下载打包好的exe文件**
2. **双击运行**即可使用
3. 无需安装Python或任何依赖

💡 **打包方法**：查看 [打包说明.md](打包说明.md)

### 方式2：运行Python源码

#### 1. 确保已安装 Python 3.8 或更高版本

#### 2. 安装依赖

```bash
pip install -r requirements.txt
```

或直接安装：

```bash
pip install PyQt6
```

## 使用方法

### 启动程序

**方式1：使用EXE文件（推荐）**
- 双击 `小灰熊歌词转换器.exe` 即可运行

**方式2：运行Python源码**
```bash
python lyric_converter.py
```

### 操作步骤

1. **选择文件**
   - 方式一：直接拖拽文件到界面中
   - 方式二：点击"选择文件"按钮
   - 方式三：点击"选择文件夹"按钮（批量处理）

2. **选择转换模式**
   - **正向**：时间轴 → 小灰熊格式（默认）
   - **反向**：小灰熊格式 → 时间轴

3. **选择编码（可选）**
   - 勾选"转换为ANSI编码（GBK）"：适合小灰熊软件（默认勾选）
   - 取消勾选：使用UTF-8编码

4. **开始转换**
   - 点击"开始转换"按钮
   - 选择输出文件夹
   - 等待转换完成

5. **查看结果**
   - 转换完成后会弹出结果窗口
   - 可点击"打开输出文件夹"查看转换后的文件

## 输入格式

程序支持多种歌词格式，能够自动识别时间戳和歌词内容：

### 格式 1：时间在前，歌词在后
```
0:13.005 0:16.755 你的脸有几分憔悴
0:16.915 0:20.505 你的眼有残留的泪
```

### 格式 2：带方括号的时间戳
```
[0:13.005] 你的脸有几分憔悴 [0:16.755]
[0:16.915] 你的眼有残留的泪 [0:20.505]
```

### 格式 3：连续时间戳
```
[0:13.005][0:16.755]你的脸有几分憔悴
[0:16.915][0:20.505]你的眼有残留的泪
```

### 格式 4：歌词在前，时间在后
```
你的脸有几分憔悴 0:13.005 0:16.755
你的眼有残留的泪 0:16.915 0:20.505
```

### 支持的时间戳格式
- `M:SS.mmm` 或 `MM:SS.mmm`（毫秒3位）
- `M:SS.mm` 或 `MM:SS.mm`（毫秒2位，自动补0）
- 带括号：`[时间]`、`<时间>`、`(时间)`
- 不带括号：`时间`

程序会自动检测并提取时间戳和歌词内容，无论它们的排列顺序。

## 输出格式

### 正向转换输出（时间轴 → 小灰熊格式）

```pascal
karaoke := CreateKaraokeObject;
karaoke.rows := 2;
karaoke.clear;

karaoke.songname := '歌曲名称'; // 歌曲名称
karaoke.singer := '歌手名称'; // 歌手名称


karaoke.add('00:00.475', '00:01.611', '[Alohomora 阿喀哈呣啦]', '1136');
karaoke.add('00:13.005', '00:16.755', '[你的脸有几分憔悴]', '3750');
karaoke.add('00:16.915', '00:20.505', '[你的眼有残留的泪]', '3590');
```

**注意**：每句歌词会自动添加方括号 `[]`

### 反向转换输出（小灰熊格式 → 时间轴）

**输入**（小灰熊格式）：
```pascal
karaoke.add('00:00.718', '00:01.516', '[보이지]', '798');
karaoke.add('00:42.367', '00:43.324', '[더욱이욕심내서]', '957');
```

**输出**（标准时间轴）：
```
0:00.718 0:01.516 보이지
0:42.367 0:43.324 더욱이욕심내서
```

**注意**：反向转换会自动移除歌词两端的方括号 `[]`

## 多语种支持

✅ **完全支持多种语言**
- 中文（简体/繁体）
- 英文（包括 I'll, don't 等缩写）
- 日文（平假名、片假名、汉字）
- 韩文（한글）
- 其他欧洲语言（法语、西班牙语、德语等）

✅ **特殊字符支持**
- 支持所有标点符号（包括单引号）
- 支持 Emoji 表情 😊🎵❤️

✅ **多编码支持**
- 自动检测文件编码（UTF-8、GBK、Big5、Shift-JIS、EUC-KR 等）
- 输出统一使用 UTF-8 编码

详见：[多语种支持测试报告.md](多语种支持测试报告.md)

## 编码说明

### 输出编码（智能处理）
- **ANSI（GBK）**：默认选项，适合小灰熊软件使用（推荐）
  - ✅ 遇到韩文/emoji等特殊字符时**自动降级为UTF-8**
  - ✅ 不会导致转换失败
  - ✅ 转换完成后会提示哪些文件使用了UTF-8
- **UTF-8**：通用编码，跨平台兼容性好

💡 **推荐：保持默认勾选ANSI，程序会智能处理特殊字符！**

详细说明请查看：[编码说明.md](编码说明.md)

### 输入编码
程序自动检测输入文件编码，支持：UTF-8、GBK、GB2312、Big5、Shift-JIS、EUC-KR等

## 注意事项

- 推荐使用 UTF-8 编码保存歌词文件（程序支持自动编码检测）
- 每行歌词必须包含：2个时间戳 + 歌词内容
- 时间戳位置灵活，程序会自动识别
- 输出文件会自动添加 `_Converted.txt` 后缀
- 输出编码默认为ANSI（GBK），可在界面取消勾选改用UTF-8

## 技术栈

- Python 3.8+
- PyQt6 - 图形界面框架
- PyInstaller - 打包工具
- 标准库：pathlib, os, re

## 打包成EXE

### 快速打包

**最简单方式**：双击运行 `build_exe.bat`

### 详细说明

查看 [打包说明.md](打包说明.md) 了解：
- 打包方法
- 参数说明
- 常见问题
- 高级配置

### 打包后

- ✅ 单个exe文件，无需安装
- ✅ 可在任意Windows电脑运行
- ✅ 无需Python环境
- ✅ 双击即可使用

## 许可证

MIT License

## 作者

由 AI 助手开发




